<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Memory Match Game</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F7F5F0; /* Soft, warm parchment color */
        }
        .game-card {
            background-color: #ffffff;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            border: 2px solid #ff8c94;
        }
        .text-kinderjoy {
            color: #ff8c94; /* Deep, loving rose color */
        }
        .card {
            width: 80px;
            height: 80px;
            perspective: 1000px;
            cursor: pointer;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            border-radius: 12px;
        }
        .card.is-flipped .card-inner, .card.is-matched .card-inner {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            font-weight: bold;
        }
        .card-front {
            background-color: #ff8c94; /* Red/Rose back */
            color: white;
            border: 3px solid #f99097;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }
        .card-back {
            background-color: #e5f5f5; /* Light Teal/Mint color */
            color: #4b5563;
            transform: rotateY(180deg);
            font-size: 16px;
            padding: 5px;
            line-height: 1.2;
        }
        /* Message Box Styling */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: #ffffff;
            border-radius: 1rem;
            padding: 2rem;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            transform: scale(0.9);
            animation: modalFadeIn 0.3s forwards;
        }
        @keyframes modalFadeIn {
            to { transform: scale(1); }
        }

        /* Responsive adjustments for cards */
        @media (max-width: 640px) {
            .card {
                width: 60px;
                height: 60px;
            }
            .card-face {
                font-size: 24px;
            }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <!-- Main Game Card -->
    <div class="game-card w-full max-w-lg rounded-2xl p-6 md:p-8 text-center">
        
        <!-- Header -->
        <h1 class="font-playfair text-3xl font-bold mb-1 text-gray-800">
            Our Memory Match ðŸ’Œ
        </h1>
        <p class="text-lg italic mb-6 text-kinderjoy">
            Match the symbols to unlock our shared memories!
        </p>

        <!-- Score and Status -->
        <div class="flex justify-between items-center mb-6 text-gray-700">
            <span id="moves" class="font-semibold">Moves: 0</span>
            <span id="matches" class="font-semibold text-kinderjoy">Matches: 0 / 6</span>
        </div>

        <!-- Game Grid -->
        <div id="game-grid" class="grid grid-cols-4 gap-3 md:gap-4 justify-center">
            <!-- Cards will be injected here by JavaScript -->
        </div>

        <!-- Reset Button -->
        <button id="reset-button" class="mt-8 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-6 rounded-xl transition duration-300 shadow-md">
            Start New Game
        </button>
    </div>

    <!-- Hidden Message Modal -->
    <div id="message-modal" class="modal-overlay">
        <div class="modal-content text-center">
            <h2 id="modal-title" class="font-playfair text-2xl font-bold mb-3 text-kinderjoy"></h2>
            <p id="modal-message" class="text-gray-700 mb-6"></p>
            <button onclick="closeModal()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                Continue
            </button>
        </div>
    </div>

    <script>
        // Game Logic Variables
        const grid = document.getElementById('game-grid');
        const movesDisplay = document.getElementById('moves');
        const matchesDisplay = document.getElementById('matches');
        const modal = document.getElementById('message-modal');
        const resetButton = document.getElementById('reset-button');
        
        let cards = [];
        let firstCard = null;
        let secondCard = null;
        let lockBoard = false;
        let moves = 0;
        let matches = 0;

        // Custom, personalized content for the game (6 pairs)
        const memoryContent = [
            { symbol: 'ðŸ’•', message: 'The First Spark: That day we met, our story started. Unexpected joy!', title: 'Our Beginning' },
            { symbol: 'ðŸ°', message: 'B. Arch Warrior: You face that huge hostel and tough course with so much strength. I admire you, Anam.', title: 'Your Power' },
            { symbol: 'â˜Žï¸', message: 'The Anchor Call: The late-night talks that solidified our connection. My favorite time of day.', title: 'Our Lifeline' },
            { symbol: 'ðŸ«‚', message: 'The Hug: Our softest moment. I remember the feel of your hand, a true commitment.', title: 'True North' },
            { symbol: 'ðŸ‘‘', message: 'My Kinderjoy: You are my sweet surprise, replacing all the grey with color.', title: 'My Queen' },
            { symbol: 'âœï¸', message: 'The Promise: The night we shared our lives and made it official. I will always be your anchor.', title: 'The Commitment' }
        ];

        // Combine and shuffle the memory content for the cards
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createBoard() {
            // Duplicate the content to create pairs
            let gameContent = [...memoryContent, ...memoryContent];
            cards = shuffleArray(gameContent);
            
            grid.innerHTML = '';
            moves = 0;
            matches = 0;
            movesDisplay.textContent = 'Moves: 0';
            matchesDisplay.textContent = 'Matches: 0 / 6';

            cards.forEach((content, index) => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('card', 'inline-block');
                cardElement.dataset.index = index;
                
                // Card Inner HTML
                cardElement.innerHTML = `
                    <div class="card-inner">
                        <div class="card-face card-front font-playfair text-xl">
                            ${(index % 2 === 0) ? 'A' : 'B'}
                        </div>
                        <div class="card-face card-back">
                            ${content.symbol}
                        </div>
                    </div>
                `;

                cardElement.addEventListener('click', handleCardClick);
                grid.appendChild(cardElement);
            });
        }

        function handleCardClick() {
            if (lockBoard) return;
            if (this === firstCard) return;

            this.classList.add('is-flipped');

            if (!firstCard) {
                firstCard = this;
                return;
            }

            secondCard = this;
            checkForMatch();
        }

        function checkForMatch() {
            moves++;
            movesDisplay.textContent = `Moves: ${moves}`;
            
            const isMatch = cards[firstCard.dataset.index].symbol === cards[secondCard.dataset.index].symbol;

            if (isMatch) {
                disableCards();
            } else {
                unflipCards();
            }
        }

        function disableCards() {
            // Match found! Show the hidden message and keep them flipped
            firstCard.removeEventListener('click', handleCardClick);
            secondCard.removeEventListener('click', handleCardClick);
            
            firstCard.classList.add('is-matched');
            secondCard.classList.add('is-matched');

            matches++;
            matchesDisplay.textContent = `Matches: ${matches} / 6`;
            
            const matchedContent = cards[firstCard.dataset.index];
            showMessage(matchedContent.title, matchedContent.message);
            
            resetBoard();
            
            if (matches === memoryContent.length) {
                setTimeout(() => showMessage('Congratulations!', `You matched all ${matches} memories! You found all the hidden messages in Our World. I love you, Anam.`, true), 1000);
            }
        }

        function unflipCards() {
            lockBoard = true;
            setTimeout(() => {
                firstCard.classList.remove('is-flipped');
                secondCard.classList.remove('is-flipped');
                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [firstCard, secondCard, lockBoard] = [null, null, false];
        }

        function showMessage(title, message, isGameOver = false) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-message').textContent = message;
            
            if (isGameOver) {
                // If the game is over, the button restarts the game
                modal.querySelector('button').textContent = 'Play Again';
                modal.querySelector('button').onclick = () => { closeModal(); createBoard(); };
            } else {
                 // If just a memory match, the button just closes the modal
                modal.querySelector('button').textContent = 'Continue';
                modal.querySelector('button').onclick = closeModal;
            }
            
            modal.style.display = 'flex';
        }

        function closeModal() {
            modal.style.display = 'none';
        }

        resetButton.addEventListener('click', createBoard);

        // Initial setup
        document.addEventListener('DOMContentLoaded', createBoard);

    </script>
</body>
</html>